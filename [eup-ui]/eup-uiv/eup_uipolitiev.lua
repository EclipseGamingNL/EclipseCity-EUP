local outfits = {
    ['Koppelriem 1'] = {
        category = 'Koppelriemen',
        ped = 'mp_f_freemode_01',
        components = {
            { 8, 3, 1 },
            { 10, 1, 1 },
        },
    },
    ['Koppelriem 2'] = {
        category = 'Koppelriemen',
        ped = 'mp_f_freemode_01',
        components = {
            { 8, 15, 1 },
            { 10, 2, 1 },
        },
    },
    ['Politie Kogelwerend Vest'] = {
        category = 'KOGELWERENDVEST',
        ped = 'mp_f_freemode_01',
        components = {
            { 9, 7, 2 },
        },
    },
    ['Verwijder Kogelwerend Vest'] = {
        category = 'KOGELWERENDVEST',
        ped = 'mp_f_freemode_01',
        components = {
            { 9, 1, 1 },	
        },
    },
    ['Koppel Holster'] = {
        category = 'Holsters',
        ped = 'mp_f_freemode_01',
        components = {
            { 7, 9, 1 },	
        },
    },
    ['Verwijder Holster'] = {
        category = 'Holsters',
        ped = 'mp_f_freemode_01',
        components = {
            { 7, 1, 1 },	
        },
    },
    ['Been Holster 1'] = {
        category = 'Holsters',
        ped = 'mp_f_freemode_01',
        components = {
            { 7, 2, 1 },	
        },
    },
    ['Been Holster 2'] = {
        category = 'Holsters',
        ped = 'mp_f_freemode_01',
        components = {
            { 7, 3, 1 },	
        },
    },
	['Motor Agent'] = {
        category = 'Politie Uniformen',
        ped = 'mp_f_freemode_01',
        props = {
            { 0, 18, 1 },	
            { 1, 0, 0 },	
            { 2, 0, 0 },	
            { 3, 0, 0 },	
        },
        components = {
            { 1, 1, 1 },	
            { 3, 37, 1 },	
            { 4, 32, 1 },
            { 5, 1, 1 },
            { 6, 26, 1 },
            { 7, 1, 1 },
            { 8, 15, 1 },
            { 9, 1, 1 },
            { 10, 1, 1 },	
            { 11, 37, 1 },
        },
    },
	['Noodhulp'] = {
        category = 'Politie Uniformen',
        ped = 'mp_f_freemode_01',
        props = {
            { 0, 0, 0 },	
            { 2, 0, 0 },	
            { 3, 0, 0 },	
        },
        components = {
            { 1, 1, 1 },	
            { 3, 34, 1 },	
            { 4, 101, 1 },
            { 5, 1, 1 },
            { 6, 26, 1 },
            { 7, 1, 1 },
            { 8, 15, 1 },
            { 9, 7, 3 },
            { 10, 2, 1 },	
            { 11, 86, 1 },
        },
    },
    ['Mobiele Eenheid'] = {
        category = 'Politie Uniformen',
        ped = 'mp_f_freemode_01',
        props = {
            { 0, 0, 0 },	
            { 2, 0, 0 },	
            { 3, 0, 0 },	
        },
        components = {
            { 1, 1, 1 },	
            { 3, 37, 1 },	
            { 4, 50, 1 },
            { 5, 1, 1 },
            { 6, 26, 1 },
            { 7, 1, 1 },
            { 8, 4, 1 },
            { 9, 1, 1 },
            { 10, 1, 1 },	
            { 11, 120, 3 },
        },
    },
    ['VP'] = {
        category = 'Politie Uniformen',
        ped = 'mp_f_freemode_01',
        props = {
            { 0, 0, 0 },	
            { 2, 0, 0 },	
            { 3, 0, 0 },	
        },
        components = {
            { 1, 1, 1 },	
            { 3, 34, 1 },	
            { 4, 101, 1 },
            { 5, 1, 1 },
            { 6, 26, 1 },
            { 7, 1, 1 },
            { 8, 15, 1 },
            { 9, 7, 4 },
            { 10, 2, 1 },	
            { 11, 86, 1 },
        },
    },
    ['OvD-P'] = {
        category = 'Politie Uniformen',
        ped = 'mp_f_freemode_01',
        props = {
            { 0, 0, 0 },	
            { 2, 0, 0 },	
            { 3, 0, 0 },	
        },
        components = {
            { 1, 1, 1 },	
            { 3, 34, 1 },	
            { 4, 101, 1 },
            { 5, 1, 1 },
            { 6, 26, 1 },
            { 7, 1, 1 },
            { 8, 15, 1 },
            { 9, 7, 1 },
            { 10, 2, 1 },	
            { 11, 86, 1 },
        },
    },
    ['Verwijder Hesje'] = {
        category = 'Hesjes',
        ped = 'mp_f_freemode_01',
        components = {
            { 9, 1, 1 },
        },
    },
    ['OM Hesje'] = {
        category = 'Hesjes',
        ped = 'mp_f_freemode_01',
        components = {
            { 9, 20, 5 },
        },
    },
    ['OvJ Hesje'] = {
        category = 'Hesjes',
        ped = 'mp_f_freemode_01',
        components = {
            { 9, 20, 9 },
        },
    },
    ['Forensische opsporing'] = {
        category = 'Recherche',
        ped = 'mp_f_freemode_01',
        props = {
            { 0, 0, 0 },	
            { 1, 0, 0 },	
            { 2, 0, 0 },	
            { 3, 0, 0 },	
        },
        components = {
            { 1, 32, 1 },	
            { 3, 102, 1 },	
            { 4, 41, 1 },
            { 5, 1, 1 },
            { 6, 26, 1 },
            { 7, 1, 1 },
            { 8, 43, 1 },
            { 9, 1, 1 },
            { 10, 1, 1 },	
            { 11, 62, 1 },
        },
    },
    ['Unmarked Kort'] = {
        category = 'Politie Uniformen',
        ped = 'mp_f_freemode_01',
        props = {
            { 0, 0, 0 },	
            { 2, 0, 0 },	
            { 3, 0, 0 },	
        },
        components = {
            { 1, 1, 1 },	
            { 3, 15, 1 },	
            { 4, 78, 1 },
            { 5, 1, 1 },
            { 6, 11, 1 },
            { 7, 7, 1 },
            { 8, 16, 1 },
            { 9, 1, 1 },
            { 10, 4, 1 },	
            { 11, 74, 2 },
        },
    },
    ['Unmarked Lang'] = {
        category = 'Politie Uniformen',
        ped = 'mp_f_freemode_01',
        props = {
            { 0, 0, 0 },	
            { 2, 0, 0 },	
            { 3, 0, 0 },	
        },
        components = {
            { 1, 1, 1 },	
            { 3, 2, 1 },	
            { 4, 78, 1 },
            { 5, 1, 1 },
            { 6, 11, 1 },
            { 7, 7, 1 },
            { 8, 16, 1 },
            { 9, 1, 1 },
            { 10, 1, 1 },	
            { 11, 64, 1 },
        },
    },
    ['Holster 1'] = {
        category = 'Recherche',
        ped = 'mp_f_freemode_01',
        components = {
            { 8, 54, 1 },
        },
    },
    ['Holster 2'] = {
        category = 'Recherche',
        ped = 'mp_f_freemode_01',
        components = {
            { 8, 10, 1 },
        },
    },
    ['Rechercheur Uniform 1'] = {
        category = 'Recherche',
        ped = 'mp_f_freemode_01',
        props = {
            { 0, 0, 0 },	
            { 2, 0, 0 },	
            { 3, 0, 0 },	
        },
        components = {
            { 1, 1, 1 },	
            { 3, 4, 1 },	
            { 4, 7, 1 },
            { 5, 1, 1 },
            { 6, 11, 1 },
            { 7, 21, 1 },
            { 8, 54, 1 },
            { 9, 1, 1 },
            { 10, 4, 1 },	
            { 11, 141, 1 },
        },
    },
    ['Rechercheur Uniform 2'] = {
        category = 'Recherche',
        ped = 'mp_f_freemode_01',
        props = {
            { 0, 0, 0 },	
            { 2, 0, 0 },	
            { 3, 0, 0 },	
        },
        components = {
            { 1, 1, 1 },	
            { 3, 4, 1 },	
            { 4, 7, 1 },
            { 5, 1, 1 },
            { 6, 11, 1 },
            { 7, 23, 1 },
            { 8, 54, 1 },
            { 9, 1, 1 },
            { 10, 4, 1 },	
            { 11, 141, 1 },
        },
    },
    ['Recherche Jas'] = {
        category = 'Recherche',
        ped = 'mp_f_freemode_01',
        props = {
            { 0, 0, 0 },	
            { 2, 0, 0 },	
            { 3, 0, 0 },	
        },
        components = {
            { 1, 1, 1 },	
            { 3, 8, 1 },	
            { 4, 78, 1 },
            { 5, 1, 1 },
            { 6, 11, 1 },
            { 7, 7, 1 },
            { 8, 60, 1 },
            { 9, 1, 1 },
            { 10, 4, 1 },	
            { 11, 180, 2 },
        },
    },
    ['Recherche T-Shirt'] = {
        category = 'Recherche',
        ped = 'mp_f_freemode_01',
        props = {
            { 0, 0, 0 },	
            { 2, 0, 0 },	
            { 3, 0, 0 },	
        },
        components = {
            { 1, 1, 1 },	
            { 3, 15, 1 },	
            { 4, 78, 1 },
            { 5, 1, 1 },
            { 6, 26, 1 },
            { 7, 1, 1 },
            { 8, 10, 1 },
            { 9, 24, 1 },
            { 10, 1, 1 },	
            { 11, 251, 1 },
        },
    },
    ['Geel Reflectie Vest'] = {
        category = 'Hesjes',
        ped = 'mp_f_freemode_01',
        components = {
            { 9, 20, 1 },
        },
    },
    ['OVD-P'] = {
        category = 'Hesjes',
        ped = 'mp_f_freemode_01',
        components = {
            { 9, 20, 7 },
        },
    },
    
}



local function setOutfit(outfit)
    local ped = PlayerPedId()

    RequestModel(outfit.ped)

    while not HasModelLoaded(outfit.ped) do
        Wait(0)
    end

    if GetEntityModel(ped) ~= GetHashKey(outfit.ped) then
        SetPlayerModel(PlayerId(), outfit.ped)
    end

    ped = PlayerPedId()

    for _, comp in ipairs(outfit.components) do
       SetPedComponentVariation(ped, comp[1], comp[2] - 1, comp[3] - 1, 0)
    end

    for _, comp in ipairs(outfit.props) do
        if comp[2] == 0 then
            ClearPedProp(ped, comp[1])
        else
            SetPedPropIndex(ped, comp[1], comp[2] - 1, comp[3] - 1, true)
        end
    end
end

local categoryOutfits = {}

for name, outfit in pairs(outfits) do
    if not categoryOutfits[outfit.category] then
        categoryOutfits[outfit.category] = {}
    end

    categoryOutfits[outfit.category][name] = outfit
end

local menuPool = NativeUI.CreatePool()
local mainMenu = NativeUI.CreateMenu('Politie EUP', 'Kies je afdeling')

for name, list in pairs(categoryOutfits) do
    local subMenu = menuPool:AddSubMenu(mainMenu, name)

    for id, outfit in pairs(list) do
        outfit.item = NativeUI.CreateItem(id, 'Pak hier je kleding')
        subMenu:AddItem(outfit.item)
    end

    subMenu.OnItemSelect = function(sender, item, index)
        -- find the outfit
        for _, outfit in pairs(list) do
            if outfit.item == item then
                CreateThread(function()
                    setOutfit(outfit)
                end)
            end
        end
    end
end

ESX = nil
TriggerEvent('esx:getSharedObject', function(obj) ESX = obj end)

menuPool:Add(mainMenu)

menuPool:RefreshIndex()

    RegisterCommand('politiev', function()

        PlayerData = ESX.GetPlayerData()

        if PlayerData.job.name == 'dsi' or PlayerData.job.name == 'at' or PlayerData.job.name == 'police' or PlayerData.job.name == 'politie' or PlayerData.job.name == 'kmar' then
        
            mainMenu:Visible(not mainMenu:Visible())
        else
            ESX.ShowNotification('~r~Je hebt geen permissies om dit uit te voeren.')
            Citizen.Wait(100)
            ESX.ShowNotification('~y~Het management is contacteerd, probeer dit niet nogmaals!')
            ESX.ShowNotification('~r~Er zullen sancties oplopen als je dit te vaak doet.')
            Citizen.Wait(100)

        end

    end, false)

CreateThread(function()
    while true do
        Wait(0)

        menuPool:ProcessMenus()
    end
end)