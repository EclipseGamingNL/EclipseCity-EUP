local outfits = {
    ['Ambulance oud-uniform'] = {
        category = 'Ambulance',
        ped = 'mp_m_freemode_01',
        props = {
            { 0, 0, 0 },	
            { 1, 0, 0 },	
            { 2, 0, 0 },	
            { 3, 0, 0 },	
        },
        components = {
            { 1, 1, 1 },	
            { 3, 86, 1 },	
            { 4, 49, 4 },
            { 5, 1, 1 },
            { 6, 26, 1 },
            { 7, 1, 1 },
            { 8, 43, 1 },
            { 9, 1, 1 },
            { 10, 2, 1 },	
            { 11, 17, 1 },
        },
    },
    ['Geel reflectie hesje'] = {
        category = 'Hesjes-Vesten',
        ped = 'mp_m_freemode_01',
        components = {
            { 7, 1, 1 },
            { 9, 11, 1 },
        },
    },
    ['Reflecterende Vest'] = {
        category = 'Hesjes-Vesten',
        ped = 'mp_m_freemode_01',
        components = {
            { 7, 1, 1 },
            { 9, 18, 5 },
            { 10, 1, 5 },
        },
    },
    ['Ambulance medewerker'] = {
        category = 'Ambulance',
        ped = 'mp_m_freemode_01',
        props = {
            { 0, 0, 0 },
            { 1, 0, 0 },
            { 2, 0, 0 },
            { 3, 0, 0 },
        },
        components = {
            { 1, 1, 1 },
            { 3, 86, 1 },
            { 4, 50, 1 },
            { 5, 1, 1 },
            { 6, 26, 1 },
            { 7, 127, 1 },
            { 8, 43, 1 },
            { 9, 1, 1 },
            { 10, 2, 1 },
            { 11, 95, 1 },
        },
    },
    ['Ambulance Jas'] = {
        category = 'Ambulance',
        ped = 'mp_m_freemode_01',
        props = {
            { 0, 0, 0 },
            { 1, 0, 0 },
            { 2, 0, 0 },
            { 3, 0, 0 },
        },
        components = {
            { 1, 1, 1 },
            { 3, 87, 1 },
            { 4, 50, 2 },
            { 5, 1, 1 },
            { 6, 26, 1 },
            { 7, 1, 1 },
            { 8, 16, 1 },
            { 9, 1, 1 },
            { 10, 10, 1 },
            { 11, 119, 8 },
        },
    },
    ['OvD-G Oud Uniform'] = {
        category = 'OvD-G',
        ped = 'mp_m_freemode_01',
        props = {
            { 0, 0, 0 },	
            { 1, 0, 0 },	
            { 2, 0, 0 },	
            { 3, 0, 0 },	
        },
        components = {
            { 1, 1, 1 },	
            { 3, 86, 1 },	
            { 4, 49, 1 },
            { 5, 1, 1 },
            { 6, 26, 1 },
            { 7, 1, 1 },
            { 8, 16, 1 },
            { 9, 1, 1 },
            { 10, 10, 1 },
            { 11, 17, 2 },
        },
    },
    ['OvD-G Jas Uniform'] = {
        category = 'OvD-G',
        ped = 'mp_m_freemode_01',
        props = {
            { 0, 0, 0 },	
            { 1, 0, 0 },	
            { 2, 0, 0 },	
            { 3, 0, 0 },	
        },
        components = {
            { 1, 1, 1 },	
            { 3, 87, 1 },	
            { 4, 50, 3 },
            { 5, 1, 1 },
            { 6, 26, 1 },
            { 7, 1, 1 },
            { 8, 107, 1 },
            { 9, 1, 1 },
            { 10, 10, 1 },
            { 11, 150, 3 },
        },
    },
    ['MMT Arts Jas'] = {
        category = 'MMT',
        ped = 'mp_m_freemode_01',
        props = {
            { 0, 0, 0 },	
            { 1, 0, 0 },	
            { 2, 0, 0 },	
            { 3, 0, 0 },	
        },
        components = {
            { 1, 1, 1 },	
            { 3, 87, 1 },	
            { 4, 49, 3 },
            { 5, 1, 1 },
            { 6, 26, 1 },
            { 7, 1, 1 },
            { 8, 107, 1 },
            { 9, 1, 1 },
            { 10, 10, 1 },
            { 11, 150, 1 },
        },
    },
    ['MMT Piloot Jas'] = {
        category = 'MMT',
        ped = 'mp_m_freemode_01',
        props = {
            { 0, 20, 0 },	
            { 1, 0, 0 },	
            { 2, 0, 0 },	
            { 3, 0, 0 },	
        },
        components = {
            { 1, 1, 1 },	
            { 3, 87, 1 },	
            { 4, 49, 3 },
            { 5, 1, 1 },
            { 6, 26, 1 },
            { 7, 1, 1 },
            { 8, 107, 1 },
            { 9, 1, 1 },
            { 10, 10, 1 },
            { 11, 150, 4 },
        },
    },
    ['MMT VPK Jas'] = {
        category = 'MMT',
        ped = 'mp_m_freemode_01',
        props = {
            { 0, 0, 0 },	
            { 1, 0, 0 },	
            { 2, 0, 0 },	
            { 3, 0, 0 },	
        },
        components = {
            { 1, 1, 1 },	
            { 3, 87, 1 },	
            { 4, 49, 3 },
            { 5, 1, 1 },
            { 6, 26, 1 },
            { 7, 1, 1 },
            { 8, 107, 1 },
            { 9, 1, 1 },
            { 10, 10, 1 },
            { 11, 150, 5 },
        },
    },
        ['MMT Piloot'] = {
        category = 'MMT',
        ped = 'mp_m_freemode_01',
        props = {
            { 0, 20, 1 },	
            { 1, 0, 0 },	
            { 2, 0, 0 },	
            { 3, 0, 0 },	
        },
        components = {
            { 1, 1, 1 },	
            { 3, 86, 1 },	
            { 4, 49, 3 },
            { 5, 1, 1 },
            { 6, 26, 1 },
            { 7, 1, 1 },
            { 8, 16, 1 },
            { 9, 1, 1 },
            { 10, 1, 1 },	
            { 11, 23, 1 },	
        },
    },
        ['Ambulance Helm'] = {
        category = 'Helmen',
        ped = 'mp_m_freemode_01',
        props = {
            { 0, 91, 1 },	
            { 1, 0, 0 },	
            { 2, 0, 0 },	
            { 3, 0, 0 },	
        },
        components = {
        },
    },
        ['Ambulance Motor Helm Geel'] = {
        category = 'Helmen',
        ped = 'mp_m_freemode_01',
        props = {
            { 0, 18, 3 },	
            { 1, 0, 0 },	
            { 2, 0, 0 },	
            { 3, 0, 0 },	
        },
        components = {
        },
    },
        ['Ambulance Motor Helm Wit'] = {
        category = 'Helmen',
        ped = 'mp_m_freemode_01',
        props = {
            { 0, 18, 2 },	
            { 1, 0, 0 },	
            { 2, 0, 0 },	
            { 3, 0, 0 },	
        },
        components = {
        },
    },
        ['Medic Bag'] = {
        category = 'Ambulance',
        ped = 'mp_m_freemode_01',
        components = {
            { 10, 4, 1 },	
        },
    },
        ['MMT Arts'] = {
        category = 'MMT',
        ped = 'mp_m_freemode_01',
        props = {
            { 0, 0, 0 },	
            { 1, 0, 0 },	
            { 2, 0, 0 },	
            { 3, 0, 0 },	
        },
        components = {
            { 1, 1, 1 },	
            { 3, 86, 1 },	
            { 4, 49, 3 },
            { 5, 1, 1 },
            { 6, 26, 1 },
            { 7, 127, 1 },
            { 8, 16, 1 },
            { 9, 1, 1 },
            { 10, 1, 1 },	
            { 11, 23, 2 },	
        },
    },
        ['MMT VPK'] = {
        category = 'MMT',
        ped = 'mp_m_freemode_01',
        props = {
            { 0, 0, 0 },	
            { 1, 0, 0 },	
            { 2, 0, 0 },	
            { 3, 0, 0 },	
        },
        components = {
            { 1, 1, 1 },	
            { 3, 86, 1 },	
            { 4, 49, 3 },
            { 5, 1, 1 },
            { 6, 26, 1 },
            { 7, 127, 1 },
            { 8, 16, 1 },
            { 9, 1, 1 },
            { 10, 1, 1 },	
            { 11, 99, 1 },	
        },
    },
	
}


local function setOutfit(outfit)
    local ped = PlayerPedId()

    RequestModel(outfit.ped)

    while not HasModelLoaded(outfit.ped) do
        Wait(0)
    end

    if GetEntityModel(ped) ~= GetHashKey(outfit.ped) then
        SetPlayerModel(PlayerId(), outfit.ped)
    end

    ped = PlayerPedId()

    for _, comp in ipairs(outfit.components) do
       SetPedComponentVariation(ped, comp[1], comp[2] - 1, comp[3] - 1, 0)
    end

    for _, comp in ipairs(outfit.props) do
        if comp[2] == 0 then
            ClearPedProp(ped, comp[1])
        else
            SetPedPropIndex(ped, comp[1], comp[2] - 1, comp[3] - 1, true)
        end
    end
end

local categoryOutfits = {}

for name, outfit in pairs(outfits) do
    if not categoryOutfits[outfit.category] then
        categoryOutfits[outfit.category] = {}
    end

    categoryOutfits[outfit.category][name] = outfit
end

local menuPool = NativeUI.CreatePool()
local mainMenu = NativeUI.CreateMenu('Ambulance EUP', 'Kies je outfit!')

for name, list in pairs(categoryOutfits) do
    local subMenu = menuPool:AddSubMenu(mainMenu, name)

    for id, outfit in pairs(list) do
        outfit.item = NativeUI.CreateItem(id, 'Selecteer je outfit.')
        subMenu:AddItem(outfit.item)
    end

    subMenu.OnItemSelect = function(sender, item, index)
        -- find the outfit
        for _, outfit in pairs(list) do
            if outfit.item == item then
                CreateThread(function()
                    setOutfit(outfit)
                end)
            end
        end
    end
end

menuPool:Add(mainMenu)

menuPool:RefreshIndex()

RegisterCommand('ambu', function()
    mainMenu:Visible(not mainMenu:Visible())
end, false)

CreateThread(function()
    while true do
        Wait(0)

        menuPool:ProcessMenus()
    end
end)

-- local function setOutfit(outfit)
--     local ped = PlayerPedId()

--     RequestModel(outfit.ped)

--     while not HasModelLoaded(outfit.ped) do
--         Wait(0)
--     end

--     if GetEntityModel(ped) ~= GetHashKey(outfit.ped) then
--         SetPlayerModel(PlayerId(), outfit.ped)
--     end

--     ped = PlayerPedId()

--     for _, comp in ipairs(outfit.components) do
--        SetPedComponentVariation(ped, comp[1], comp[2] - 1, comp[3] - 1, 0)
--     end

--     for _, comp in ipairs(outfit.props) do
--         if comp[2] == 0 then
--             ClearPedProp(ped, comp[1])
--         else
--             SetPedPropIndex(ped, comp[1], comp[2] - 1, comp[3] - 1, true)
--         end
--     end
-- end

-- local categoryOutfits = {}

-- for name, outfit in pairs(outfits) do
--     if not categoryOutfits[outfit.category] then
--         categoryOutfits[outfit.category] = {}
--     end

--     categoryOutfits[outfit.category][name] = outfit
-- end

-- local menuPool = NativeUI.CreatePool()
-- local mainMenu = NativeUI.CreateMenu('Ambulance EUP', 'Kies je afdeling')

-- for name, list in pairs(categoryOutfits) do
--     local subMenu = menuPool:AddSubMenu(mainMenu, name)

--     for id, outfit in pairs(list) do
--         outfit.item = NativeUI.CreateItem(id, 'Pak hier je kleding')
--         subMenu:AddItem(outfit.item)
--     end

--     subMenu.OnItemSelect = function(sender, item, index)
--         -- find the outfit
--         for _, outfit in pairs(list) do
--             if outfit.item == item then
--                 CreateThread(function()
--                     setOutfit(outfit)
--                 end)
--             end
--         end
--     end
-- end

-- ESX = nil
-- TriggerEvent('esx:getSharedObject', function(obj) ESX = obj end)

-- menuPool:Add(mainMenu)

-- menuPool:RefreshIndex()

--     RegisterCommand('ambu', function()

--         PlayerData = ESX.GetPlayerData()

--         if PlayerData.job.name == 'ambulance' or PlayerData.job.name == 'fire' or PlayerData.job.name == 'firefighter' or PlayerData.job.name == 'brandweer' or PlayerData.job.name == 'fire' then
        
--             mainMenu:Visible(not mainMenu:Visible())
--         else
--             ESX.ShowNotification('~r~Je hebt geen permissies om dit uit te voeren.')
--             Citizen.Wait(100)
--             ESX.ShowNotification('~y~Het management is contacteerd, probeer dit niet nogmaals!')
--             ESX.ShowNotification('~r~Er zullen sancties oplopen als je dit te vaak doet.')
--             Citizen.Wait(100)

--         end

--     end, false)

-- CreateThread(function()
--     while true do
--         Wait(0)

--         menuPool:ProcessMenus()
--     end
-- end)