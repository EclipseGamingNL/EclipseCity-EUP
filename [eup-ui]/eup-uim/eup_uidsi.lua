local outfits = {
	    ['Tazer Holster'] = {
        category = 'AT/DSI Holsters',
        ped = 'mp_m_freemode_01',
        components = {
            { 7, 1, 1 },
            { 10, 21, 1 },	
        },
    },
	    ['Been Holster + EHBO Tas'] = {
        category = 'AT/DSI Holsters',
        ped = 'mp_m_freemode_01',
        components = {
            { 7, 44, 1 },
            { 10, 1, 1 },	
        },
    },
	    ['Been Holster + Tazer 3 + EHBO Tas'] = {
        category = 'AT/DSI Holsters',
        ped = 'mp_m_freemode_01',
        components = {
            { 7, 44, 1 },
            { 10, 21, 1 }, 
        },
    },
	    ['Been Holster 2 + Tazer 3'] = {
        category = 'AT/DSI Holsters',
        ped = 'mp_m_freemode_01',
        components = {
            { 7, 7, 1 },
            { 10, 21, 1 },	
        },
    },
	    ['Geen Vuurwapen + Tazer Holster'] = {
        category = 'AT/DSI Holsters',
        ped = 'mp_m_freemode_01',
        components = {
            { 7, 1, 1 },
            { 10, 1, 1 },	
        },
    },
	    ['Been Holster 1'] = {
        category = 'AT/DSI Holsters',
        ped = 'mp_m_freemode_01',
        components = {
            { 7, 3, 1 },
            { 10, 1, 1 },	
        },
    },
	    ['Been Holster 2'] = {
        category = 'AT/DSI Holsters',
        ped = 'mp_m_freemode_01',
        components = {
            { 7, 7, 1 },
            { 10, 1, 1 },	
        },
    },
	    ['Been Holster 1 + Tazer 1'] = {
        category = 'AT/DSI Holsters',
        ped = 'mp_m_freemode_01',
        components = {
            { 7, 4, 1 },
            { 10, 1, 1 },	
        },
    },
	    ['Been Holster 1 + Tazer 2'] = {
        category = 'AT/DSI Holsters',
        ped = 'mp_m_freemode_01',
        components = {
            { 7, 3, 1 },
            { 10, 21, 1 },	
        },
    },
    ['DSI Masker 1'] = {
        category = 'AT/DSI Hoofd',
        ped = 'mp_m_freemode_01',
        components = {
            { 1, 73, 2 },	
        },
    },
    ['DSI Masker 2'] = {
        category = 'AT/DSI Hoofd',
        ped = 'mp_m_freemode_01',
        components = {
            { 1, 26, 1 },	
            { 2, 26, 1 },	
            { 13, 26, 1 },	
        },
    },
        ['Licht Lang - Dienst Speciale Interventies'] = {
        category = 'AT/DSI Uniformen',
        ped = 'mp_m_freemode_01',
        props = {
            { 0, 15, 1 },	
            { 1, 0, 0 },	
            { 2, 0, 0 },	
            { 3, 0, 0 },	
        },
        components = {
            { 1, 73, 2 },	
            { 3, 34, 1 },	
            { 4, 27, 7 },
            { 5, 1, 1 },
            { 6, 8, 7 },
            { 7, 3, 2 },
            { 8, 21, 1 },
            { 9, 24, 2 },
            { 10, 21, 1 },	
            { 11, 98, 2 },
			{ 12, 98, 1 },
			
        },
    },
        ['Licht Kort - Dienst Speciale Interventies'] = {
        category = 'AT/DSI Uniformen',
        ped = 'mp_m_freemode_01',
        props = {
            { 0, 15, 1 },	
            { 1, 0, 0 },	
            { 2, 0, 0 },	
            { 3, 0, 0 },	
        },
        components = {
            { 1, 73, 2 },	
            { 3, 31, 1 },	
            { 4, 27, 7 },
            { 5, 1, 1 },
            { 6, 8, 7 },
            { 7, 3, 2 },
            { 8, 21, 1 },
            { 9, 24, 2 },
            { 10, 21, 1 },	
            { 11, 101, 1 },			
        },
    },
        ['Licht Kort 2 - Dienst Speciale Interventies'] = {
        category = 'AT/DSI Uniformen',
        ped = 'mp_m_freemode_01',
        props = {
            { 0, 15, 1 },	
            { 1, 0, 0 },	
            { 2, 0, 0 },	
            { 3, 0, 0 },	
        },
        components = {
            { 1, 73, 2 },	
            { 3, 31, 1 },	
            { 4, 3, 2 },
            { 5, 1, 1 },
            { 6, 8, 7 },
            { 7, 4, 1 },
            { 8, 16, 1 },
            { 9, 10, 1 },
            { 10, 17, 1 },	
            { 11, 101, 1 },			
        },
    },
        ['Verwijder Tas'] = {
        category = 'AT/DSI Tassen',
        ped = 'mp_m_freemode_01',
        components = {
            { 5, 1, 1 },		
        },
    },
        ['DSI Medic Tas'] = {
        category = 'AT/DSI Tassen',
        ped = 'mp_m_freemode_01',
        components = {
            { 5, 53, 1 },		
        },
    },
        ['DSI Tas'] = {
        category = 'AT/DSI Tassen',
        ped = 'mp_m_freemode_01',
        components = {
            { 5, 53, 4 },		
        },
    },
        ['Zwarte Tas'] = {
        category = 'AT/DSI Tassen',
        ped = 'mp_m_freemode_01',
        components = {
            { 5, 65, 1 },		
        },
    },
        ['Medic Tas'] = {
        category = 'AT/DSI Tassen',
        ped = 'mp_m_freemode_01',
        components = {
            { 5, 65, 2 },		
        },
    },
        ['ZD330 - Dienst Speciale Interventies'] = {
        category = 'DSI RN',
        ped = 'mp_m_freemode_01',
        props = {
            { 0, 82, 1 },	
            { 1, 0, 0 },	
            { 2, 0, 0 },	
            { 3, 0, 0 },	
        },
        components = {
            { 1, 73, 2 },	
            { 3, 34, 1 },	
            { 4, 27, 7 },
            { 5, 1, 1 },
            { 6, 8, 7 },
            { 7, 3, 2 },
            { 8, 21, 1 },
            { 9, 24, 2 },
            { 10, 21, 1 },	
            { 11, 98, 2 },			
        },
    },
        ['ZD331 - Dienst Speciale Interventies'] = {
        category = 'DSI RN',
        ped = 'mp_m_freemode_01',
        props = {
            { 0, 82, 2 },	
            { 1, 0, 0 },	
            { 2, 0, 0 },	
            { 3, 0, 0 },	
        },
        components = {
            { 1, 73, 2 },	
            { 3, 34, 1 },	
            { 4, 27, 7 },
            { 5, 1, 1 },
            { 6, 8, 7 },
            { 7, 3, 2 },
            { 8, 21, 1 },
            { 9, 24, 2 },
            { 10, 21, 1 },	
            { 11, 100, 1 },			
        },
    },
        ['ZD332 - Dienst Speciale Interventies'] = {
        category = 'DSI RN',
        ped = 'mp_m_freemode_01',
        props = {
            { 0, 82, 3 },	
            { 1, 0, 0 },	
            { 2, 0, 0 },	
            { 3, 0, 0 },	
        },
        components = {
            { 1, 73, 2 },	
            { 3, 34, 1 },	
            { 4, 27, 7 },
            { 5, 1, 1 },
            { 6, 8, 7 },
            { 7, 3, 2 },
            { 8, 21, 1 },
            { 9, 24, 2 },
            { 10, 21, 1 },	
            { 11, 100, 2 },			
        },
    },
        ['ZD333 - Dienst Speciale Interventies'] = {
        category = 'DSI RN',
        ped = 'mp_m_freemode_01',
        props = {
            { 0, 82, 4 },	
            { 1, 0, 0 },	
            { 2, 0, 0 },	
            { 3, 0, 0 },	
        },
        components = {
            { 1, 73, 2 },	
            { 3, 34, 1 },	
            { 4, 27, 7 },
            { 5, 1, 1 },
            { 6, 8, 7 },
            { 7, 3, 2 },
            { 8, 21, 1 },
            { 9, 24, 2 },
            { 10, 21, 1 },	
            { 11, 100, 3 },			
        },
    },
        ['ZD334 - Dienst Speciale Interventies'] = {
        category = 'DSI RN',
        ped = 'mp_m_freemode_01',
        props = {
            { 0, 82, 1 },	
            { 1, 0, 0 },	
            { 2, 0, 0 },	
            { 3, 0, 0 },	
        },
        components = {
            { 1, 73, 2 },	
            { 3, 34, 1 },	
            { 4, 27, 7 },
            { 5, 1, 1 },
            { 6, 8, 7 },
            { 7, 3, 2 },
            { 8, 21, 1 },
            { 9, 24, 2 },
            { 10, 21, 1 },	
            { 11, 100, 4 },			
        },
    },
        ['ZD335 - Dienst Speciale Interventies'] = {
        category = 'DSI RN',
        ped = 'mp_m_freemode_01',
        props = {
            { 0, 82, 1 },	
            { 1, 0, 0 },	
            { 2, 0, 0 },	
            { 3, 0, 0 },	
        },
        components = {
            { 1, 73, 2 },	
            { 3, 34, 1 },	
            { 4, 27, 7 },
            { 5, 1, 1 },
            { 6, 8, 7 },
            { 7, 3, 2 },
            { 8, 21, 1 },
            { 9, 24, 2 },
            { 10, 21, 1 },	
            { 11, 100, 5 },			
        },
    },
        ['Zwaar - Dienst Speciale Interventies'] = {
        category = 'AT/DSI Uniformen',
        ped = 'mp_m_freemode_01',
        props = {
            { 0, 80, 1 },	
            { 1, 0, 0 },	
            { 2, 0, 0 },	
            { 3, 0, 0 },	
        },
        components = {
            { 1, 73, 2 },	
            { 3, 34, 1 },	
            { 4, 27, 7 },
            { 5, 1, 1 },
            { 6, 8, 7 },
            { 7, 3, 2 },
            { 8, 21, 1 },
            { 9, 25, 1 },
            { 10, 1, 1 },	
            { 11, 140, 1 },
			{ 12, 125, 1 },
			
        },
    },
        ['Arrestatie Team'] = {
        category = 'AT/DSI Uniformen',
        ped = 'mp_m_freemode_01',
        props = {
            { 0, 8, 1 },	
            { 1, 0, 0 },	
            { 2, 0, 0 },	
            { 3, 0, 0 },	
        },
        components = {
            { 1, 73, 1 },	
            { 3, 31, 1 },	
            { 4, 5, 3 },
            { 5, 1, 1 },
            { 6, 16, 4 },
            { 7, 4, 1 },
            { 8, 16, 1 },
            { 9, 16, 1 },
            { 10, 17, 1 },	
            { 11, 32, 3 },
			
        },
    },
        ['Arrestatie Team V2'] = {
        category = 'AT/DSI Uniformen',
        ped = 'mp_m_freemode_01',
        props = {
            { 0, 14, 1 },	
            { 1, 0, 0 },	
            { 2, 0, 0 },	
            { 3, 0, 0 },	
        },
        components = {
            { 1, 73, 1 },	
            { 3, 39, 1 },	
            { 4, 5, 3 },
            { 5, 1, 1 },
            { 6, 16, 4 },
            { 7, 4, 1 },
            { 8, 16, 1 },
            { 9, 16, 1 },
            { 10, 17, 1 },	
            { 11, 27, 4 },
			
        },
    },
        ['Grijze Spijkerbroek'] = {
        category = 'AT/DSI Broeken',
        ped = 'mp_m_freemode_01',
        components = {
            { 4, 5, 6 },
        },
    },
        ['Blauwe Spijkerbroek 1'] = {
        category = 'AT/DSI Broeken',
        ped = 'mp_m_freemode_01',
        components = {
            { 4, 27, 7 },
        },
    },
        ['Blauwe Spijkerbroek 2'] = {
        category = 'AT/DSI Broeken',
        ped = 'mp_m_freemode_01',
        components = {
            { 4, 5, 7 },
        },
    },
        ['Blauwe Politie Beret'] = {
        category = 'AT/DSI Hoofd',
        ped = 'mp_m_freemode_01',
        props = {
            { 0, 29, 2 },	
            { 1, 0, 0 },	
            { 2, 0, 0 },	
            { 3, 0, 0 },	
        },
        components = {
        },
    },
        ['Night Vision Goggles'] = {
        category = 'AT/DSI Hoofd',
        ped = 'mp_m_freemode_01',
        props = {
            { 0, 82, 1 },	
            { 1, 0, 0 },	
            { 2, 0, 0 },	
            { 3, 0, 0 },	
        },
        components = {
        },
    },
        ['Arrestatie Team Helm 1'] = {
        category = 'AT/DSI Hoofd',
        ped = 'mp_m_freemode_01',
        props = {
            { 0, 8, 1 },	
            { 1, 0, 0 },	
            { 2, 0, 0 },	
            { 3, 0, 0 },	
        },
        components = {
        },
    },
        ['Arrestatie Team Helm 2'] = {
        category = 'AT/DSI Hoofd',
        ped = 'mp_m_freemode_01',
        props = {
            { 0, 14, 1 },	
            { 1, 0, 0 },	
            { 2, 0, 0 },	
            { 3, 0, 0 },	
        },
        components = {
        },
    },
        ['DSI Lichte Helm'] = {
        category = 'AT/DSI Hoofd',
        ped = 'mp_m_freemode_01',
        props = {
            { 0, 15, 1 },	
            { 1, 0, 0 },	
            { 2, 0, 0 },	
            { 3, 0, 0 },	
        },
        components = {
        },
    },
        ['DSI Zware Helm 1'] = {
        category = 'AT/DSI Hoofd',
        ped = 'mp_m_freemode_01',
        props = {
            { 0, 80, 1 },	
            { 1, 0, 0 },	
            { 2, 0, 0 },	
            { 3, 0, 0 },	
        },
        components = {
        },
    },
        ['DSI Zware Helm 2'] = {
        category = 'AT/DSI Hoofd',
        ped = 'mp_m_freemode_01',
        props = {
            { 0, 93, 1 },	
            { 1, 0, 0 },	
            { 2, 0, 0 },	
            { 3, 0, 0 },	
        },
        components = {
        },
    },
        ['Grijze Spijkerbroek met gaten'] = {
        category = 'AT/DSI Broeken',
        ped = 'mp_m_freemode_01',
        components = {
            { 4, 3, 2 },
        },
    },
        ['Grijze Broek'] = {
        category = 'AT/DSI Broeken',
        ped = 'mp_m_freemode_01',
        components = {
            { 4, 60, 3 },
        },
    },
        ['Witte schoenen V1'] = {
        category = 'AT/DSI Schoenen',
        ped = 'mp_m_freemode_01',
        components = {
            { 6, 8, 7 },
        },
    },
        ['Witte Nike 2'] = {
        category = 'AT/DSI Schoenen',
        ped = 'mp_m_freemode_01',
        components = {
            { 6, 8, 15 },
        },
    },
        ['Rode schoenen V1'] = {
        category = 'AT/DSI Schoenen',
        ped = 'mp_m_freemode_01',
        components = {
            { 6, 1, 2 },
        },
    },
       ['Rode schoenen V3'] = {
        category = 'AT/DSI Schoenen',
        ped = 'mp_m_freemode_01',
        components = {
            { 6, 16, 1 },
        },
    },
        ['Witte Nike'] = {
        category = 'AT/DSI Schoenen',
        ped = 'mp_m_freemode_01',
        components = {
            { 6, 58, 1 },
        },
    },
        ['Witte schoenen V2'] = {
        category = 'AT/DSI Schoenen',
        ped = 'mp_m_freemode_01',
        components = {
            { 6, 16, 4 },
        },
    },
        ['Rode schoenen V2'] = {
        category = 'AT/DSI Schoenen',
        ped = 'mp_m_freemode_01',
        components = {
            { 6, 33, 6 },
        },
    },
    
}



local function setOutfit(outfit)
    local ped = PlayerPedId()

    RequestModel(outfit.ped)

    while not HasModelLoaded(outfit.ped) do
        Wait(0)
    end

    if GetEntityModel(ped) ~= GetHashKey(outfit.ped) then
        SetPlayerModel(PlayerId(), outfit.ped)
    end

    ped = PlayerPedId()

    for _, comp in ipairs(outfit.components) do
       SetPedComponentVariation(ped, comp[1], comp[2] - 1, comp[3] - 1, 0)
    end

    for _, comp in ipairs(outfit.props) do
        if comp[2] == 0 then
            ClearPedProp(ped, comp[1])
        else
            SetPedPropIndex(ped, comp[1], comp[2] - 1, comp[3] - 1, true)
        end
    end
end

local categoryOutfits = {}

for name, outfit in pairs(outfits) do
    if not categoryOutfits[outfit.category] then
        categoryOutfits[outfit.category] = {}
    end

    categoryOutfits[outfit.category][name] = outfit
end

local menuPool = NativeUI.CreatePool()
local mainMenu = NativeUI.CreateMenu('AT/DSI EUP', 'Kies je afdeling')

for name, list in pairs(categoryOutfits) do
    local subMenu = menuPool:AddSubMenu(mainMenu, name)

    for id, outfit in pairs(list) do
        outfit.item = NativeUI.CreateItem(id, 'Pak hier je kleding')
        subMenu:AddItem(outfit.item)
    end

    subMenu.OnItemSelect = function(sender, item, index)
        -- find the outfit
        for _, outfit in pairs(list) do
            if outfit.item == item then
                CreateThread(function()
                    setOutfit(outfit)
                end)
            end
        end
    end
end

QBCore = nil
local QBCore = exports['qb-core']:GetCoreObject()

menuPool:Add(mainMenu)

menuPool:RefreshIndex()

    RegisterCommand('dsi', function()

        PlayerData = QBCore.Functions.GetPlayerData()

        if PlayerData.job.name == 'police' or PlayerData.job.name == 'politie' or PlayerData.job.name == 'kmar' then
        
            mainMenu:Visible(not mainMenu:Visible())
        else
            -- QBCore:Notify('~r~Je hebt geen permissies om dit uit te voeren.')
            -- Citizen.Wait(100)
            -- QBCore:Notify('~y~Het management is contacteerd, probeer dit niet nogmaals!')
            -- QBCore:Notify('~r~Er zullen sancties oplopen als je dit te vaak doet.')
            -- Citizen.Wait(100)

        end

    end, false)

CreateThread(function()
    while true do
        Wait(0)

        menuPool:ProcessMenus()
    end
end)